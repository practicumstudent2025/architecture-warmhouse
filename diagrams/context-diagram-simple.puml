@startuml
title Контекстная диаграмма: Текущая система "Тёплый дом"

!define RECTANGLE class

' Внешние участники
actor "Пользователь\n(владелец дома)" as User
actor "Специалист\nпо установке" as Specialist

' Системы
rectangle "Веб-приложение\n(Монолит на Go)\nУправление отоплением\nСинхронное взаимодействие" as WebApp
database "База данных\n(PostgreSQL)\nХранение состояния\nКонфигурации устройств" as DB

' Устройства
rectangle "Умные устройства\n100 модулей управления отоплением\nДатчики температуры\nРеле управления" as Devices

' Связи
User --> WebApp : Управляет отоплением\nЗапрашивает температуру (HTTPS)
Specialist --> WebApp : Регистрирует устройства\nКонфигурирует систему (HTTPS)
WebApp --> Devices : Отправка команд\nЗапрос данных\n(Синхронные API вызовы)
Devices --> WebApp : Отправка телеметрии\n(Синхронные ответы)
WebApp --> DB : Чтение/запись данных (SQL)

' Проблемные места
note right of WebApp : Критические проблемы:\n- Единая точка отказа\n- Блокирующие вызовы\n- Ограниченная масштабируемость

note right of Devices : Ограничения:\n- Нет автономности\n- Требуется ручная установка\n- Синхронное взаимодействие

@enduml 